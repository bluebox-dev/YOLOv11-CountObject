# YOLOv11 Count Object

## ภาพรวม
โปรเจ็กต์นี้สาธิตการนับจำนวนวัตถุแบบเรียลไทม์ด้วยโมเดล YOLOv11 ของ Ultralytics โดยใช้วิดีโอตัวอย่าง `Demo.mp4` และเส้นหรือพื้นที่นับที่กำหนดเองใน `CountObject.py` เหมาะสำหรับงานเฝ้าระวัง การวิเคราะห์การจราจร หรือกระบวนการผลิตที่ต้องการนับการผ่านเข้า–ออกของวัตถุอย่างแม่นยำ

## คุณสมบัติเด่น
- นับวัตถุที่ตัดผ่านเส้นหรือเข้าออกพื้นที่ที่กำหนด
- ใช้โมเดล YOLOv11 รุ่นใหม่จาก Ultralytics (รองรับโมเดลที่ฝึกเอง)
- แสดงผลภาพพร้อมจำนวนวัตถุแบบเรียลไทม์และบันทึกวิดีโอผลลัพธ์เป็นไฟล์ `.avi`
- โค้ดสั้น กระชับ ปรับแต่งง่าย เหมาะสำหรับการต่อยอดและใช้งานจริง

## โครงสร้างโปรเจ็กต์
| ไฟล์ | คำอธิบาย |
| --- | --- |
| `CountObject.py` | สคริปต์หลักสำหรับตรวจจับและนับวัตถุจากวิดีโอ |
| `PrepareYOLOv11.py` | ตัวอย่างการดาวน์โหลดโมเดล YOLOv11 จาก Ultralytics |
| `Demo.mp4` | วิดีโอตัวอย่างสำหรับทดสอบการนับวัตถุ |
| `README.md` | เอกสารประกอบโปรเจ็กต์ |

## ข้อกำหนดระบบ
- Python 3.9 ขึ้นไป
- ระบบปฏิบัติการ Windows, macOS หรือ Linux
- การ์ดจอ NVIDIA ที่รองรับ CUDA (ไม่บังคับ แต่ช่วยให้ inference เร็วขึ้น)
- แนะนำให้ทำงานใน Virtual Environment เพื่อลดปัญหาการชนกันของแพ็กเกจ

## การติดตั้งและเตรียมใช้งาน
1. โคลนหรือดาวน์โหลดโปรเจ็กต์นี้มาบนเครื่องของคุณ
2. สร้าง Virtual Environment (ตัวอย่างด้วย `venv`)
   ```bash
   python -m venv .venv
   source .venv/bin/activate        # macOS / Linux
   .venv\Scripts\activate           # Windows PowerShell
   ```
3. ติดตั้งไลบรารีที่จำเป็น
   ```bash
   pip install --upgrade pip
   pip install ultralytics opencv-python
   ```
4. หากคุณมีไฟล์น้ำหนักโมเดลที่ฝึกเอง (`best.pt`) ให้วางไว้ในไดเรกทอรีเดียวกับสคริปต์ หรือปรับเส้นทางใน `CountObject.py`

## การดาวน์โหลดโมเดลตัวอย่าง
หากต้องการโมเดลตัวอย่างสำหรับทดลอง สามารถใช้สคริปต์ `PrepareYOLOv11.py`
```bash
python PrepareYOLOv11.py
```
สคริปต์นี้จะดาวน์โหลดโมเดล `yolo11n.pt` และทดสอบการตรวจจับเบื้องต้น (ผลลัพธ์จะถูกบันทึกในโฟลเดอร์ `runs/predict-*`)

## วิธีใช้งานการนับวัตถุ
1. ปรับค่าพารามิเตอร์ใน `CountObject.py` ตามต้องการ
   - `region_points` กำหนดเส้นหรือพื้นที่สำหรับนับ (รองรับ line, rectangle, polygon)
   - `model` ระบุไฟล์น้ำหนักโมเดล (`best.pt` หรือโมเดลที่คุณฝึกเอง)
   - `classes` (ถูกคอมเมนต์ไว้) หากต้องการนับเฉพาะคลาส เช่น คนหรือรถ
   - `tracker` เลือกอัลกอริทึมติดตามวัตถุเพิ่มเติม เช่น `botsort.yaml`
2. รันสคริปต์
   ```bash
   python CountObject.py
   ```
3. หน้าต่างจะแสดงผลวิดีโอพร้อมจำนวนวัตถุที่ตรวจจับได้ และจะสร้างไฟล์ `object_counting_output.avi` เป็นวิดีโอผลลัพธ์

## การปรับแต่งเพิ่มเติม
- เปลี่ยนแหล่งวิดีโอเป็นกล้องสดโดยแก้ `cv2.VideoCapture(0)` หรือสาย RTSP
- ปรับแต่งความละเอียดและอัตราเฟรมของวิดีโอเอาต์พุตตามความต้องการ
- เพิ่มการบันทึกสถิติ เช่น จำนวนวัตถุสะสม หรือบันทึกผลเป็นไฟล์ CSV

## ผลลัพธ์ที่คาดหวัง
- ค่าการนับวัตถุจะถูกแสดงบนเฟรมภาพแบบเรียลไทม์
- ได้ไฟล์วิดีโอผลลัพธ์ (`object_counting_output.avi`) สำหรับนำไปวิเคราะห์หรือรายงานต่อ

## การแก้ปัญหาที่พบบ่อย
- **วิดีโอเปิดไม่ขึ้น**: ตรวจสอบเส้นทางไฟล์วิดีโอหรือสิทธิ์การเข้าถึง
- **โมเดลโหลดไม่ได้**: ตรวจสอบว่ามีไฟล์ `.pt` อยู่ในตำแหน่งที่ระบุ และใช้เวอร์ชัน YOLO ที่รองรับ
- **การนับไม่แม่นยำ**: ปรับมุมมองเส้น/พื้นที่นับ และพิจารณาฝึกโมเดลด้วยข้อมูลเฉพาะของคุณ

## แหล่งอ้างอิง
- [Ultralytics YOLO Documentation](https://docs.ultralytics.com/)
- [Ultralytics Solutions Object Counter](https://docs.ultralytics.com/guides/object-counter/)
- [OpenCV Documentation](https://docs.opencv.org/)

หากมีข้อเสนอแนะหรือพบปัญหา สามารถเปิด Issues หรือส่ง Pull Request เพื่อช่วยปรับปรุงโปรเจ็กต์นี้ได้เลย!
